"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[57741],{92741:(e,s,t)=>{t.d(s,{Z:()=>r});t(41539),t(88674),t(82772);var i=t(9669),n=t.n(i),a=t(8778);n().interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),n().interceptors.request.use((function(e){var s=getUserToken(),t=a.Z.getAnonymousToken(),i=e.url.indexOf("//")>-1;return(""!=s&&i?e.url.indexOf(window.server)>-1:e.baseURL.indexOf(window.server)>-1)&&(e.headers.Token="".concat(s)),""===s&&t&&(i?e.url.indexOf(window.server)>-1:e.baseURL.indexOf(window.server)>-1)&&(e.headers["Anonymous-Token"]="".concat(t)),e}),(function(e){return Promise.reject(e)}));const r=n()},8778:(e,s,t)=>{t.d(s,{Z:()=>u});var i=t(4942),n=(t(83710),t(38862),t(47941),t(82526),t(57327),t(41539),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070),t(93949));function a(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);s&&(i=i.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?a(Object(t),!0).forEach((function(s){(0,i.Z)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var o="anonymous_token";function l(){try{var e=JSON.parse(localStorage.getItem(o)),s=e&&!function(e){return e.lastAccessed+6048e5<(new Date).getTime()}(e);return s||(e={token:(t="anon",i=(0,n._3)(),i.substring(0,i.length-t.length)+t),lastAccessed:(new Date).getTime()}),localStorage.setItem(o,JSON.stringify(r(r({},e),{},{lastAccessed:(new Date).getTime()}))),e}catch(e){return{token:null}}var t,i}const u={getAnonymousToken:function(){var e;if(null!==(e=window.me)&&void 0!==e&&e.id){try{localStorage.removeItem(o)}catch(e){console.log("Failed to remove anonymous token.")}return null}return l().token}}},54871:(e,s,t)=>{t.d(s,{Z:()=>i});const i={lwAdminRights:"LwAdminRights",dashboard:"Dashboard",liveSessionsView:"LiveSessionsView",liveSessionManage:"LiveSessionManage",liveSessionSetup:"LiveSessionSetup",courseManage:"CourseManage",courseCreateDelete:"CourseCreateDelete",coursePublish:"CoursePublish",coursePageManage:"CoursePageManage",courseContent:"CourseContent",courseSettings:"CourseSettings",courseView:"CourseView",siteManage:"SiteManage",usersManage:"UsersManage",usersView:"UsersView",usersBulk:"UsersBulk",couponsView:"CouponsView",couponsManage:"CouponsManage",planPromotionsView:"PlanPromotionsView",planPromotionsManage:"PlanPromotionsManage",bundlesView:"BundlesView",bundlesManage:"BundlesManage",subscriptionsView:"SubscriptionsView",subscriptionsManage:"SubscriptionsManage",leadsView:"LeadsView",leadsManage:"LeadsManage",affiliatesManage:"AffiliatesManage",affiliateMarketing:"AffiliateMarketing",analyticsView:"AnalyticsView",analyticsExport:"AnalyticsExport",analyticsAllCoursesInsightsView:"AnalyticsAllCoursesInsightsView",analyticsCourseInsightsView:"AnalyticsCourseInsightsView",scheduleReportsManage:"ScheduleReportsManage",gradebookManage:"GradebookManage",gradebookView:"GradebookView",certificatesManage:"CertificatesManage",certificatesView:"CertificatesView",assignmentsManage:"AssignmentsManage",assignmentsView:"AssignmentsView",questionBankManage:"QuestionBankManage",salesManage:"SalesManage",salesView:"SalesView",activityView:"ActivityView",translationsManage:"TranslationsManage",settingsIntegrationManage:"SettingsIntegrationManage",settingsWebhooksManage:"SettingsWebhooksManage",settingsFinancialManage:"SettingsFinancialManage",settingsNotificationManage:"SettingsNotificationManage",settingsSchoolManage:"SettingsSchoolManage",settingsResourcesManage:"SettingsResourcesManage",communityManage:"CommunityManage",settingsMobileManage:"SettingsMobileManage",userRolesManage:"UserRolesManage",userLoginAs:"UserLoginAs",userSegmentsManage:"UserSegmentsManage",courseSettingsAdvanced:"CourseSettingsAdvanced",blogSetup:"BlogSetup",siteSettingsManage:"SiteSettingsManage",settingsNotificationEmailsManage:"SettingsNotificationEmailsManage",assessmentSurveyManage:"AssessmentSurveyManage",npsManage:"NpsManage",npsView:"NpsView",qualificationManage:"QualificationManage",seatsOfferingManage:"SeatsOfferingManage",seatsOfferingView:"SeatsOfferingView",seatsUsersManage:"SeatsUsersManage",seatsUsersView:"SeatsUsersView"}},67541:(e,s,t)=>{t.d(s,{Z:()=>i});const i={lwAdmin:"lwAdmin",admin:"admin",instructor:"instructor",segment:"segment",seatManager:"seatManager",user:"user"}},57741:(e,s,t)=>{t.d(s,{Z:()=>f});t(38862);var i=t(92741),n=t(15671),a=t(43144),r=(t(26699),t(32023),t(54871)),o=t(67541),l=t(70538),u=function(){function e(){(0,n.Z)(this,e),this.state=l.default.observable({allUserRoles:o.Z,allPermissions:r.Z,userImpersonationEnabled:!1,user:{parentRole:"",userRole:"",permissions:[],isAffiliate:!1,segmentManageCourses:[]},roleImpersonationEnabled:!1,userImpersonated:{parentRole:"",userRole:"",roleName:"",permissions:[]}});var s=this.getRoleImpersonationEnabledKey(),t=localStorage.getItem(s);null!==t&&(this.state.roleImpersonationEnabled="0"!==t),this.state.userImpersonationEnabled=!!window.userImpersonation}return(0,a.Z)(e,[{key:"getRoleImpersonationKey",value:function(){return"lw_role_impersonation_"+window.me.id}},{key:"getUserRoleKey",value:function(){return"lw_role_"+window.me.id}},{key:"getRoleKey",value:function(){return this.state.roleImpersonationEnabled?this.getRoleImpersonationKey():this.getUserRoleKey()}},{key:"getRoleImpersonationEnabledKey",value:function(){return"lw_role_impersonation_enabled_"+window.me.id}},{key:"isRoleImpersonationEnabled",value:function(){return this.state.roleImpersonationEnabled}},{key:"isUserImpersonationEnabled",value:function(){return this.state.userImpersonationEnabled}},{key:"hasSystemPermission",value:function(e){var s,t;return this.state.roleImpersonationEnabled?null===(s=this.state.userImpersonated.permissions)||void 0===s?void 0:s.includes(e):null===(t=this.state.user.permissions)||void 0===t?void 0:t.includes(e)}},{key:"hasLwAdminRightsPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.lwAdminRights)}},{key:"hasBlogSetupRightsPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.blogSetup)}},{key:"hasCourseSettingsAdvancedPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.courseSettingsAdvanced)}},{key:"hasDashboardPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.dashboard)}},{key:"hasLiveSessionsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.liveSessionsView)}},{key:"hasLiveSessionsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.liveSessionManage)}},{key:"hasLiveSessionSetupPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.liveSessionSetup)}},{key:"hasCourseManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.courseManage)}},{key:"hasCourseCreateDeletePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.courseCreateDelete)}},{key:"hasCoursePublishPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.coursePublish)}},{key:"hasCoursePageManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.coursePageManage)}},{key:"hasCourseContentPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.courseContent)}},{key:"hasCourseSettingsPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.courseSettings)}},{key:"hasCourseViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.courseView)}},{key:"hasSiteManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.siteManage)}},{key:"hasUsersManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.usersManage)}},{key:"hasUsersViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.usersView)}},{key:"hasUsersBulkPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.usersBulk)}},{key:"hasCouponsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.couponsView)}},{key:"hasCouponsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.couponsManage)}},{key:"hasPlanPromotionsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.planPromotionsView)}},{key:"hasPlanPromotionsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.planPromotionsManage)}},{key:"hasBundlesViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.bundlesView)}},{key:"hasBundlesManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.bundlesManage)}},{key:"hasSubscriptionsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.subscriptionsView)}},{key:"hasSubscriptionsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.subscriptionsManage)}},{key:"hasLeadsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.leadsView)}},{key:"hasLeadsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.leadsManage)}},{key:"hasAffiliatesManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.affiliatesManage)}},{key:"hasAffiliateMarketingPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.affiliateMarketing)}},{key:"hasAnalyticsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.analyticsView)}},{key:"hasAnalyticsExportPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.analyticsExport)}},{key:"hasAnalyticsAllCoursesInsightsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.analyticsAllCoursesInsightsView)}},{key:"hasAnalyticsCourseInsightsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.analyticsCourseInsightsView)}},{key:"hasScheduleReportsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.scheduleReportsManage)}},{key:"hasGradebookManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.gradebookManage)}},{key:"hasGradebookViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.gradebookView)}},{key:"hasCertificatesManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.certificatesManage)}},{key:"hasCertificatesViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.certificatesView)}},{key:"hasAssignmentsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.assignmentsManage)}},{key:"hasAssignmentsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.assignmentsView)}},{key:"hasQuestionBankManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.questionBankManage)}},{key:"hasSalesManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.salesManage)}},{key:"hasSalesViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.salesView)}},{key:"hasActivityViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.activityView)}},{key:"hasTranslationsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.translationsManage)}},{key:"hasSettingsIntegrationManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsIntegrationManage)}},{key:"hasSettingsWebhooksManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsWebhooksManage)}},{key:"hasSettingsFinancialManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsFinancialManage)}},{key:"hasSettingsNotificationManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsNotificationManage)}},{key:"hasNotificationEmailsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsNotificationEmailsManage)}},{key:"hasSettingsSchoolManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsSchoolManage)}},{key:"hasSettingsResourcesManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsResourcesManage)}},{key:"hasCommunityManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.communityManage)}},{key:"hasSettingsMobileManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.settingsMobileManage)}},{key:"hasAssessmentSurveyManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.assessmentSurveyManage)}},{key:"hasNpsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.npsManage)}},{key:"hasNpsViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.npsView)}},{key:"hasQualificationManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.qualificationManage)}},{key:"hasLogInAsUserPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.userLoginAs)}},{key:"hasSiteSettingsManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.siteSettingsManage)}},{key:"hasManageUserSegmentsPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.userSegmentsManage)}},{key:"hasUserRolesManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.userRolesManage)}},{key:"hasSeatOfferingManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.seatsOfferingManage)}},{key:"hasSeatOfferingViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.seatsOfferingView)}},{key:"hasSeatUsersManagePermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.seatsUsersManage)}},{key:"hasSeatUsersViewPermission",value:function(){return this.hasSystemPermission(this.state.allPermissions.seatsUsersView)}},{key:"hasParentRole",value:function(e){return this.state.roleImpersonationEnabled?this.state.userImpersonated.parentRole===e:this.state.user.parentRole===e}},{key:"getParentRole",value:function(){return this.state.roleImpersonationEnabled?this.state.userImpersonated.parentRole:this.state.user.parentRole}},{key:"getUserRole",value:function(){return this.state.roleImpersonationEnabled?this.state.userImpersonated.userRole:this.state.user.userRole}},{key:"isCustomRole",value:function(){return this.state.roleImpersonationEnabled?this.state.userImpersonated.userRole!==this.getParentRole():this.state.user.userRole!==this.getParentRole()}},{key:"isParentRoleAdmin",value:function(){return this.hasParentRole(this.state.allUserRoles.admin)}},{key:"isParentRoleLwAdmin",value:function(){return this.hasParentRole(this.state.allUserRoles.lwAdmin)}},{key:"isParentRoleInstructor",value:function(){return this.hasParentRole(this.state.allUserRoles.instructor)}},{key:"isParentRoleSegment",value:function(){return this.hasParentRole(this.state.allUserRoles.segment)}},{key:"isParentRoleSeatManager",value:function(){return this.hasParentRole(this.state.allUserRoles.seatManager)}},{key:"isParentRoleUser",value:function(){return this.getParentRole()===this.state.allUserRoles.user}},{key:"getSegmentManageCourses",value:function(){return this.state.user.segmentManageCourses}},{key:"hasSegmentManageCourseId",value:function(e){return this.state.user.segmentManageCourses.includes(e)}},{key:"isAffiliate",value:function(){return this.state.user.isAffiliate}},{key:"startPreviewRole",value:function(e,s,t,i){this.state.roleImpersonationEnabled=!0,this.state.userImpersonated.permissions=e,this.state.userImpersonated.parentRole=s,this.state.userImpersonated.userRole=t,this.state.userImpersonated.roleName=i;var n=this.getRoleImpersonationKey(),a={parentRole:s,userRole:t,roleName:i,permissions:e};localStorage.setItem(n,JSON.stringify(a));var r=this.getRoleImpersonationEnabledKey();localStorage.setItem(r,"1")}},{key:"stopPreviewRoleConfirm",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/author/user_roles?tab=Overview";showMessage("alert","Stop simulating the role","You are about to stop the simulation of the role "+e,[{name:"Stop simulation",func:this.stopPreviewRole,args:[this,s]},{name:"Cancel"}])}},{key:"stopPreviewRole",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/author/user_roles?tab=Overview";e.state.userRoleImpersonationEnabled=!1,e.state.userImpersonated.permissions=[],e.state.userImpersonated.parentRole="",e.state.userImpersonated.userRole="",e.state.userImpersonated.roleName="";var t=e.getRoleImpersonationKey(),i={parentRole:"",userRole:"",roleName:"",permissions:[]};localStorage.setItem(t,JSON.stringify(i));var n=e.getRoleImpersonationEnabledKey();localStorage.setItem(n,"0"),s||(s="/author/user_roles?tab=Overview"),window.location.href=s}},{key:"getRoleImpersonationRoleName",value:function(){return this.state.userImpersonated.roleName}},{key:"startUserImpersonation",value:function(){this.state.userImpersonationEnabled=!0}},{key:"stopUserImpersonation",value:function(){this.state.userImpersonationEnabled=!1}},{key:"getUserPermissions",value:function(){return this.state.roleImpersonationEnabled?this.state.userImpersonated.permissions:this.state.user.permissions}}]),e}(),m=new u,h=m.getRoleKey(),g=window.me.userPermissions,c=window.me.parentRole,P=window.me.userRole;function y(){h=m.getRoleKey();var e=localStorage.getItem(h);null!==e&&(e=JSON.parse(e),m.state.roleImpersonationEnabled?(m.state.userImpersonated.parentRole=e.parentRole,m.state.userImpersonated.userRole=e.userRole,m.state.userImpersonated.roleName=e.roleName,m.state.userImpersonated.permissions=e.permissions):(m.state.user.parentRole=e.parentRole,m.state.user.userRole=e.userRole,m.state.user.permissions=e.permissions,m.state.user.isAffiliate=e.isAffiliate,m.state.user.segmentManageCourses=e.segmentManageCourses))}m.state.user.permissions=g,m.state.user.parentRole=c,m.state.user.userRole=P,l.default.prototype.$lwGates=m,l.default.$lwGates=m,l.default.prototype.updateSystemPermissions=function(){y()},y();const f={install:function(e,s){window.me&&(m.state.roleImpersonationEnabled||i.Z.get(server+"user-roles/role/permissions").then((function(e){if(e.data.errors&&e.data.errors.length>0)return showMessage("alert",window.LWTranslate.get("api.session_expired_title"),window.LWTranslate.get("api.session_expired_description"),[{name:"OK"}]);m.state.user.parentRole=e.data.data.parentRole,m.state.user.userRole=e.data.data.userRole,m.state.user.permissions=e.data.data.permissions,m.state.user.isAffiliate=e.data.data.isAffiliate,m.state.user.segmentManageCourses=null!==e.data.data.segmentManageCourses?e.data.data.segmentManageCourses:[],localStorage.setItem(h,JSON.stringify(m.state.user))})).catch((function(e){console.error(e.message)})))}}}}]);